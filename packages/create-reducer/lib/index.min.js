!function(e,r){"object"==typeof exports&&"undefined"!=typeof module?r(exports):"function"==typeof define&&define.amd?define(["exports"],r):r(e["spider-operations"]={})}(this,function(e){"use strict";var r={isMember:Array.isArray,clone:function(e,r){for(var n=new Array(e.length),t=0;t<e.length;t++)n[t]=r(e[t]);return n},reconcile:function(e,r,n){for(var t=!1,u=0;u<r.length;u++)r[u]=n(r[u]),r[u]!==e[u]&&(t=!1);return t||r.length!==e.length?r:e}},n={isMember:function(e){return"object"==typeof e&&null!==e&&e.constructor===Object},clone:function(e,r){for(var n={},t=Object.keys(e),u=0;u<t.length;u++){var o=t[u];n[o]=r(e[o])}return n},reconcile:function(e,r,n){for(var t=!1,u=Object.keys(r),o=0;o<u.length;o++){var c=u[o];r[c]=n(r[c]),e[c]!==r[c]&&(t=!0)}return t||Object.keys(e).length!==u.length?r:e}};e.createReducer=function(e,r,n){var t,u,o="string"==typeof e?e:e.name+"Reducer",c={},i=function(e,t){void 0===e&&(e=r);var u=c[t.type];if(!u)return e;var o=n[u];return o?o.apply(void 0,function(){for(var e=0,r=0,n=arguments.length;r<n;r++)e+=arguments[r].length;var t=Array(e),u=0;for(r=0;r<n;r++)for(var o=arguments[r],c=0,i=o.length;c<i;c++,u++)t[u]=o[c];return t}([e],t.payload)):e},a=[i];"function"==typeof e?t=e:(u=e,t=function(e){return"@"+u+"/"+e});for(var f={},l=function(e){var r=t(e);c[r]=e,f[e]=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return{type:r,payload:e,reducers:a}}},v=0,d=Object.keys(n);v<d.length;v++)l(d[v]);return Object.defineProperty(i,"name",{value:o,enumerable:!1}),[i,f]},e.settable=function(){return{set:function(e,r){return r}}},e.entityTable=function(e){return{add:function(r,n){var t=e(n),u=r[t];return u?(u.lock+=1,u.entity=n):r[t]={lock:1,entity:n},r},remove:function(r,n){var t=e(n),u=r[t];return u&&(1==u.lock?delete r[t]:u.lock-=1),r},delete:function(e,r){var n=e[r];return n&&(1==n.lock?delete e[r]:n.lock-=1),e},update:function(r,n){var t=r[e(n)];return t&&(t.entity=n),r}}},e.arraylike=function(){return{add:function(e,r){return e.push(r),e},delete:function(e,r){var n=e.length;return n<=r||r<-n?e:(e.splice((r+n)%n,1),e)},remove:function(e,r){var n=e.indexOf(r);return n<0?e:(e.splice(n,1),e)},update:function(e,r,n){var t=e.length;return t<=r||r<-t?e:(e[(r+t)%t]=n,e)}}},e.createDraftStateMiddleware=function(e){var t=(void 0===e?{}:e).draftSpecs,u=void 0===t?[r,n]:t;return function(e,r){var n=r.wrapReducer,t=function(e){return function(r,n){var t=new Map,u=function(e,r){return function n(t){for(var u=0;u<e.length;u++){var o=e[u],c=o.isMember,i=o.clone;if(c(t)){var a=i(t,n);return r.set(a,t),a}}return t}}(e,t);return function(e,r){return function n(t){for(var u=0;u<e.length;u++){var o=e[u],c=o.isMember,i=o.reconcile;if(c(t)){var a=r.get(t);return void 0!==a?i(a,t,n):t}return t}return t}}(e,t)(r(u(n)))}}(u);return{wrapReducer:function(e){var r=n(e),u=r.nextState;return r.nextState=function(e,r){return t(function(e){return u(e,r)},e)},r}}}},Object.defineProperty(e,"__esModule",{value:!0})});
