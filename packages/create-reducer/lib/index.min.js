!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e["spider-operations"]={})}(this,function(e){"use strict";var t=Object.assign,r=Object.create,n=Object.keys;var i=function(){return(i=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};e.createReducer=function(e,i,u){var o,a,c="string"==typeof e?e:e.name,f=function(e,t){void 0===e&&(e=i);var r=v[t.type];if(!r)return e;var n=u[r];return n?n.apply(void 0,[e].concat(t.payload)):e},l=[f];"function"==typeof e?o=e:(a=e,o=function(e){return"@"+a+"/"+e});for(var v={},s={},d=Object.create(null,{reducers:{value:l}}),p=function(e){v[o(e)]=e,s[e]=function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];return t(r(d),{type:o(e),payload:n})}},y=0,b=n(u);y<b.length;y++)p(b[y]);return Object.defineProperties(f,{name:{value:c,enumerable:!1},actions:{value:s,enumerable:!1}}),f},e.settable=function(){return{set:function(e,t){return t}}},e.entityTable=function(e){return{add:function(t,r){var n,u,o=e(r),a=t[o];if(a){var c=a.lock,f=a.entity;return i({},t,((n={})[o]={lock:c+1,entity:f},n))}return i({},t,((u={})[o]={lock:1,entity:r},u))},remove:function(t,r){var n,u=e(r),o=t[u];if(o){var a=o.lock,c=o.entity;if(1==a){var f=i({},t);return delete f[u],f}return i({},t,((n={})[u]={lock:a-1,entity:c},n))}return t},delete:function(e,t){var r,n=e[t];if(n){var u=n.lock,o=n.entity;if(1==u){var a=i({},e);return delete a[t],a}return i({},e,((r={})[t]={lock:u-1,entity:o},r))}return e},update:function(t,r){var n,u=e(r),o=t[u];if(o){var a=o.lock;return i({},t,((n={})[u]={lock:a,entity:r},n))}return t}}},e.arraylike=function(){return{add:function(e,t){var r=e.slice();return r.push(t),r},delete:function(e,t){var r=e.length;if(r<=t||t<-r)return e;var n=e.slice();return n.splice((t+r)%r,1),n},remove:function(e,t){var r=e.indexOf(t);if(r<0)return e;var n=e.slice();return n.splice(r,1),n},update:function(e,t,r){var n=e.length;if(n<=t||t<-n)return e;var i=e.slice();return i[(t+n)%n]=r,i}}},Object.defineProperty(e,"__esModule",{value:!0})});
