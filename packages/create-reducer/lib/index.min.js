!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n(e["spider-operations"]={})}(this,function(e){"use strict";var n=Object.keys;e.createReducer=function(e,t,r){var o,u,i="string"==typeof e?e:e.name+"Reducer",f={},a=function(e,n){void 0===e&&(e=t);var o=f[n.type];if(!o)return e;var u=r[o];return u?u.apply(void 0,function(){for(var e=0,n=0,t=arguments.length;n<t;n++)e+=arguments[n].length;var r=Array(e),o=0;for(n=0;n<t;n++)for(var u=arguments[n],i=0,f=u.length;i<f;i++,o++)r[o]=u[i];return r}([e],n.payload)):e},c=[a];"function"==typeof e?o=e:(u=e,o=function(e){return"@"+u+"/"+e});for(var l={},d=function(e){var n=o(e);f[n]=e,l[e]=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return{type:n,payload:e,reducers:c}}},p=0,v=n(r);p<v.length;p++)d(v[p]);return Object.defineProperty(a,"name",{value:i,enumerable:!1}),[a,l]},e.settable=function(){return{set:function(e,n){return n}}},e.entityTable=function(e){return{add:function(n,t){var r=e(t),o=n[r];return o?(o.lock+=1,o.entity=t):n[r]={lock:1,entity:t},n},remove:function(n,t){var r=e(t),o=n[r];return o&&(1==o.lock?delete n[r]:o.lock-=1),n},delete:function(e,n){var t=e[n];return t&&(1==t.lock?delete e[n]:t.lock-=1),e},update:function(n,t){var r=n[e(t)];return r&&(r.entity=t),n}}},e.arraylike=function(){return{add:function(e,n){return e.push(n),e},delete:function(e,n){var t=e.length;return t<=n||n<-t?e:(e.splice((n+t)%t,1),e)},remove:function(e,n){var t=e.indexOf(n);return t<0?e:(e.splice(t,1),e)},update:function(e,n,t){var r=e.length;return r<=n||n<-r?e:(e[(n+r)%r]=t,e)}}},Object.defineProperty(e,"__esModule",{value:!0})});
